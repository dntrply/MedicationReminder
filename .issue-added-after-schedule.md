Summary
If a medication is added after its scheduled time for the same day (e.g., medication created at 6:00 PM but today’s schedule is 9:00 AM), the Timeline action dialog currently allows actions (Taken / Snooze / Skip). For today, that occurrence didn’t exist at the time; showing actions can confuse users and generate inconsistent history. We should suppress actions for past‑scheduled occurrences that predate creation, with an optional grace window X.

Scenarios
- Created at 6:00 PM; today’s scheduled time was 9:00 AM → Do not show action buttons today (occurrence predates creation by many hours).
- Created at 6:00 PM; today’s scheduled time was 5:00 PM → Within X=60 minutes of creation: MAY show actions (grace window) to allow immediate resolution.

Proposed Behavior
- Define a grace window X minutes (default X = 60; can be tuned later).
- For today’s occurrence where scheduledTimestamp < createdAt:
  - If (createdAt - scheduledTimestamp) > X minutes: hide/disable Taken and Snooze; optionally hide Skip as well (product decision). Show an informational panel with large image, scheduled time, and a friendly message (e.g., “This dose was scheduled earlier today before you added it.”).
  - If (createdAt - scheduledTimestamp) ≤ X minutes: allow the full action palette (Taken, Snooze, Skip) so the user can reconcile immediately.
- For future occurrences (scheduledTimestamp ≥ now), obey the “upcoming window” rules (Issue #13) regarding X minutes before time.
- For previous days (yesterday or earlier), treat as overdue/backlog per current rules (full actions allowed) since the user may need to resolve missed doses.

Rationale
- Prevents misleading actions for occurrences that didn’t logically exist in the app when they were scheduled earlier the same day.
- Provides a pragmatic grace window to immediately fix near‑missed entries right after creation.

Implementation Notes
- Primary location: Timeline action dialog gating.
  - File: app/src/main/java/com/medreminder/app/ui/TimelineView.kt
  - Compute today’s scheduledTimestamp = today @ (hour:minute) for the slot.
  - Read medication.createdAt.
  - If scheduledTimestamp < createdAt, compare delta = createdAt - scheduledTimestamp to X.
    - delta > X → show informational panel (no actions or Skip‑only per decision).
    - delta ≤ X → show actions.
- Ensure coexistence with other guards:
  - Upcoming window (Issue #13): before X minutes of future time, show upcoming panel instead of actions.
  - Post‑SKIPPED guard (Issue #11): after marking SKIPPED, disable/hide Snooze/Skip for that occurrence.

Acceptance Criteria
- When today’s scheduled time is much earlier than creation time, Timeline dialog shows an informational panel (no actions) for that occurrence.
- When today’s scheduled time is within X minutes before creation, full actions are available to reconcile immediately.
- Future occurrences (today later) follow the upcoming window rule (Issue #13) and show actions within X minutes of time.
- Previous‑day occurrences remain fully actionable.
- Works with font scaling; image and text remain legible.

Open Questions
- Should Skip be offered in the “predates creation” panel? (Initial suggestion: optional; lean toward hiding to avoid accidental history edits.)
- Default X = 60 minutes acceptable? Should this become a setting later?

References
- Timeline action dialog: app/src/main/java/com/medreminder/app/ui/TimelineView.kt
- Medication model with createdAt: app/src/main/java/com/medreminder/app/data/Medication.kt
- Related: Issue #11 (post‑skip guard), Issue #13 (upcoming window gate).
